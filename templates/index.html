{% extends "layout.html" %}
{% block body %}
	
	<script type="text/javascript">
		
		function controlText(param) {
			if (param == 'copy') {
				var txt = $('.Input_text').text();
				$('#copy').zclip({
					path: "../static/ZeroClipboard.swf",
					copy: function() {　
						return $('.Input_text').text();　　　　　　　
					}
				});
			} else {
				$('.Input_text').text("");
			}
		}
		
		function displayResult(param) {
			var x;
			if(window.event) {
				x=event.keyCode;
			}
			else if(event.which) {
				x=event.which;
			}
			if (x == 13) {
				$('.Input_text').html($('.Input_text').html()+param);
				$('.dropdown').removeClass("open");
				$('.dropdown-toggle').val("").focus();
			}
		}
	</script>

    <script type="text/javascript">
		$(function () {
			var submit_form = function (e) {
        		$.getJSON($SCRIPT_ROOT + '/inputmethod', {
            		pinyin: $('input[name="pinyin"]').val(),
        		}, function (data) {
					$('.dropdown-menu').empty();
					for (var i = 0; i < data.result.length; i++) {
						var li = "<li><a tabindex='-1' href='#' onkeydown='displayResult("+'"'+data.result[i]["sentence"]+'"'+")'>"+data.result[i]["sentence"]+"</li>";
						$('.dropdown-menu').append(li);
					}
					$('.dropdown-toggle').attr("data-toggle", "dropdown");
					$('.dropdown-toggle').trigger("click");				
        		});
        		return false;
    		};
	    	$('input[type=text]').bind('keydown', function (e) {
    	    	if (e.keyCode == 13) {
        	    	submit_form(e);
        		}
    		});
		}); 
	</script>

	<div class="navbar navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="#">Pinyin IME</a>
			<div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="#myModal" data-toggle="modal">使用说明</a>
              </li>
            </ul>
          </div>
			
		</div>
	</div>
	
	<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<h3 id="myModalLabel">使用说明</h3>
		</div>
		<div class="modal-body">
			<h4>输入</h4>
			<p>1.将光标移入左侧的输入框，输入拼音</p>
			<p>2.按Enter键返回结果，按键盘的上、下键选择目标</p>
			<p>3.按Enter键确认目标，将汉字键入右侧的文本框</p>
			<h4>修改</h4>
			<p>有以下两种方案：</p>
			<p>1.将光标移入右侧文本框，直接进行删除</p>
			<p>2.点击“清空”按钮，删除文本框中所有内容</p>
			<h4>复制</h4>
			<p>点击“复制”按钮，可将文本框内容复制到剪贴板</p>
			<h4>表情</h4>
			<p>点击右侧文本框右下角的表情按钮，即可选择qq表情和贴吧表情</p>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
		</div>
	</div>
	
	<div class="container">
		<h1>Pinyin IME</h1> <hr>
	    <div class="row">
	         <div class="well span4 dropdown">
	            <input type="text" class="span4 dropdown-toggle" placeholder="Please input..." name="pinyin"/>
				<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
				</ul>
	        </div>
	        <div class="span7">
	        	<div class="Main">     
			        <div class="Input_Box">     
			        	<div contenteditable="true" class="Input_text lead"></div>   
			            <div class="Input_Foot">
			            	<span class="span6"></span>
			                <a class="imgBtn" href="javascript:void(0);">'◡'</a>
			            </div>     
					</div>
					<p style="margin-top: 15px;">
				      	<button id="copy" class="btn btn-primary" type="button" onclick="controlText('copy')">复制</button>
				    	<button class="btn btn-primary" type="button" onclick="controlText('cls')">清空</button>
				    </p>
			        <div class="faceDiv">
			        	<section class="emoji_container">
				       	</section>
				       	<section class="emoji_tab"></section>
			       	</div>    
				</div>	    
	        </div>
	    </div>
    </div>
	

<script src="../static/js/myemojiPl.js"></script>
<script>
var emojiconfig = {
	qq:{
    	name : "qq表情",
    	path : "../static/img/qq/",
    	maxNum : 91,
    	file : ".gif"
    },
    tieba: {
        name: "贴吧表情",
        path: "../static/img/tieba/",
        maxNum: 50,
        file: ".jpg",
        placeholder: ":{alias}:",
        alias: {
            1: "hehe",
            2: "haha",
            3: "tushe",
            4: "a",
            5: "ku",
            6: "lu",
            7: "kaixin",
            8: "han",
            9: "lei",
            10: "heixian",
            11: "bishi",
            12: "bugaoxing",
            13: "zhenbang",
            14: "qian",
            15: "yiwen",
            16: "yinxian",
            17: "tu",
            18: "yi",
            19: "weiqu",
            20: "huaxin",
            21: "hu",
            22: "xiaonian",
            23: "neng",
            24: "taikaixin",
            25: "huaji",
            26: "mianqiang",
            27: "kuanghan",
            28: "guai",
            29: "shuijiao",
            30: "jinku",
            31: "shengqi",
            32: "jinya",
            33: "pen",
            34: "aixin",
            35: "xinsui",
            36: "meigui",
            37: "liwu",
            38: "caihong",
            39: "xxyl",
            40: "taiyang",
            41: "qianbi",
            42: "dnegpao",
            43: "chabei",
            44: "dangao",
            45: "yinyue",
            46: "haha2",
            47: "shenli",
            48: "damuzhi",
            49: "ruo",
            50: "OK"
        },
        title: {
            1: "呵呵",
            2: "哈哈",
            3: "吐舌",
            4: "啊",
            5: "酷",
            6: "怒",
            7: "开心",
            8: "汗",
            9: "泪",
            10: "黑线",
            11: "鄙视",
            12: "不高兴",
            13: "真棒",
            14: "钱",
            15: "疑问",
            16: "阴脸",
            17: "吐",
            18: "咦",
            19: "委屈",
            20: "花心",
            21: "呼~",
            22: "笑脸",
            23: "冷",
            24: "太开心",
            25: "滑稽",
            26: "勉强",
            27: "狂汗",
            28: "乖",
            29: "睡觉",
            30: "惊哭",
            31: "生气",
            32: "惊讶",
            33: "喷",
            34: "爱心",
            35: "心碎",
            36: "玫瑰",
            37: "礼物",
            38: "彩虹",
            39: "星星月亮",
            40: "太阳",
            41: "钱币",
            42: "灯泡",
            43: "茶杯",
            44: "蛋糕",
            45: "音乐",
            46: "haha",
            47: "胜利",
            48: "大拇指",
            49: "弱",
            50: "OK"
        }
      }
  };
$('.Main').myEmoji({emojiconfig : emojiconfig});
</script> 

{% endblock %}
